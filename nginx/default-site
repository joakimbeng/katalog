server {
  listen 80 default_server;
  server_name _; # This is just an invalid value which will never trigger on a real hostname.
  error_log /proc/self/fd/2;
  access_log /proc/self/fd/1;
  return 503;
}

upstream dockerdemo_com {
    server 172.17.1.112:8080;
}

server {
  server_name dockerdemo.com;
  proxy_buffering off;
  error_log /proc/self/fd/2;
  access_log /proc/self/fd/1;

  location / {
    proxy_pass http://dockerdemo_com;
    include /etc/nginx/proxy_params;

    # HTTP 1.1 support
    proxy_http_version 1.1;

    # Websockets support
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
  }
}
upstream dev_ituxportalen_se {
    server 172.17.1.116:80;
}

server {
  server_name dev.ituxportalen.se;
  proxy_buffering off;
  error_log /proc/self/fd/2;
  access_log /proc/self/fd/1;

  location / {
    proxy_pass http://dev_ituxportalen_se;
    include /etc/nginx/proxy_params;

    # HTTP 1.1 support
    proxy_http_version 1.1;

    # Websockets support
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
  }
}
upstream prod_ituxportalen_se {
    server 172.17.1.174:80;
}

server {
  server_name prod.ituxportalen.se;
  proxy_buffering off;
  error_log /proc/self/fd/2;
  access_log /proc/self/fd/1;

  location / {
    proxy_pass http://prod_ituxportalen_se;
    include /etc/nginx/proxy_params;

    # HTTP 1.1 support
    proxy_http_version 1.1;

    # Websockets support
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
  }
}
